<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" lang="fr">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paiement</title>
    <link rel="stylesheet" type="text/css" href="abo.css">
    <link rel="icon" type="image/svg" href="icon/favicon.svg">
    <script src="abo.js"></script>
    <script src="paiement.js"></script>
    <link rel="stylesheet" type="text/css" href="paiement.css">
    <script src="script.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
    const selectedPrice = localStorage.getItem('selectedPrice');
    const selectedMonths = localStorage.getItem('selectedMonths');
    const selectedEcran = localStorage.getItem('selectedEcran');
    const selectedType = localStorage.getItem('selectedType');
    
    const montant = document.getElementById('montant');
    montant.textContent = selectedPrice;

    const nMois = document.getElementById('nMois');
    nMois.textContent = selectedMonths;

    const nEcran = document.getElementById('nEcran');
    nEcran.textContent = selectedEcran;
    
    const forfait = document.getElementById('forfait');
    if (forfait) {
        forfait.textContent = selectedType;
    }

    const recDetails = document.getElementById('recDetails');
    const modesPaie = document.getElementById('modesPaie');
    const details = document.getElementById('details');
    const paiement = document.getElementById('paiement');
    const suivant = document.getElementById('step-btn');

    paiement.style.opacity = '0.25';
    modesPaie.style.display = 'none';
    suivant.style.display = 'none';

    paiement.addEventListener('click', function() {
        details.style.opacity = '0.25';
        paiement.style.opacity = '1';
        recDetails.style.display = 'none';
        modesPaie.style.display = 'block';
    });

    details.addEventListener('click', function() {
        paiement.style.opacity = '0.25';
        details.style.opacity = '1';
        modesPaie.style.display = 'none';
        recDetails.style.display = 'block';
    });

    const checkbox = document.getElementById('checkbox');
    checkbox.addEventListener('click', function() {
        suivant.style.display = checkbox.checked ? 'block' : 'none';
    });

    function expiration(months) {
        const today = new Date();
        const finDate = new Date(today);

        const debut = document.getElementById('debut');
        const fin = document.getElementById('fin');

        debut.textContent = today.getDate() + '/' + (today.getMonth() + 1) + '/' + today.getFullYear();

        finDate.setMonth(today.getMonth() + parseInt(months));
        fin.textContent = finDate.getDate() + '/' + (finDate.getMonth() + 1) + '/' + finDate.getFullYear();
    }

    const titre = localStorage.getItem('titre');
    if (titre) {
        const titreElement = document.getElementById('type');
        titreElement.textContent = titre;
    }

    expiration(selectedMonths);
});
    </script>
</head>
<body>
    <header>
    <!--Les différentes étapes de la souscription-->
    <div class="steps">
        <div class="step-unselected">
            <div class="step">
                <div class="step-num">1</div>
                <div class="step-nom">Forfait</div>
            </div>
        </div>
        <div class="step">
            <div class="step-num">2</div>
            <div class="step-nom">Paiement</div>
        </div>
        <div class="step-unselected">
            <div class="step">
                <div class="step-num">3</div>
                <div class="step-nom">Connexion</div>
            </div>
        </div>
    </div>
    </header>
    <main>
        <div>
            <div class="forfait-type">
                <div class="forfait-type-title" id="details">Détails</div>
                <div class="forfait-type-title" id="paiement">Paiement</div>
            </div>
        </div>

        <!--Détails de la souscription-->
        <div class="rec" id="recDetails">
            <h3 class="tt">Détails de la souscription</h3>
            <div class="liner">
                    <div class="line">
                        <p class="info">Abonnement</p>
                        <p class="infoAnswer" id="type"></p>
                    </div>
                    <div class="line" id="tdf">
                        <p class="info"></p>
                        <p class="infoAnswer"></p>
                    </div>
                    <div class="line">
                        <p class="info">Nombre d'écrans</p>
                        <p class="infoAnswer" id="nEcran"></p>
                    </div>
                    <div class="line">
                        <p class="info">Nombre de mois</p>
                        <p class="infoAnswer" id="nMois"></p>
                    </div>
                    <div class="line">
                        <p class="info">Début</p>
                        <p class="infoAnswer" id="debut"></p>
                    </div>
                    <div class="line">
                        <p class="info">Fin</p>
                        <p class="infoAnswer" id="fin"></p>
                    </div>
            </div>
            <div class="montant-choisi">
                <p>Total</p>
                <div class="montant">
                    <p class="devise"></p>
                    <p class="prix" id="montant"></p>
                </div>
                <button class="step-btn" onclick="retour()">Modifier</button>
            </div>
        </div>

        <!--Mode de paiement-->
        <div class="rec" id="modesPaie">
            <h3 class="tt">Mode de paiement</h3>
            <div class="modePaie">
                <div id="omPaie" class="method" onclick="method('om', this)">
                    <img src="logo/om.png" class="logo-paie" alt="Orange Money">
                    <p id="omText">Orange Money</p>
                </div>
                <div id="wavePaie" class="method" onclick="method('wave', this)">
                    <img src="logo/wave.png" class="logo-paie" alt="Wave">
                    <p id="waveText">Wave</p>
                </div>
            </div>
            <div class="modePaie">
                <div id="mtnPaie" class="method" onclick="method('mtn', this)">
                    <img src="logo/mtn.png" class="logo-paie" alt="MTN Money">
                    <p id="mtnText">MTN Money</p>
                </div>    
                <div id="moovPaie" class="method" onclick="method('moov', this)">
                    <img src="logo/moov.png" class="logo-paie" alt="Moov (Flooz) Money">
                    <p id="moovText">Moov (Flooz) Money</p>
                </div>
            </div>
            <h3 class="tt">Numéro de paiement</h3>
            <h2 id="numP"></h2>
            
            <!--Insertion du reçu-->
            <div id="check">
                <input type="checkbox" id="checkbox" required>
                <p>En payant, vous acceptez nos <a href="lupcu.html" style="text-decoration: none; margin-bottom: 20px;"><span class="link">r&egrave;gles et conditions d'usages</span></a>.</p>
            </div>
        </div>
        <a type="submit"href="connexion.html" id="step-btn" class="step-btn">Suivant</a>
    </main>
</body>
</html>